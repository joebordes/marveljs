!function(a,b){a.componentNamespace=a.componentNamespace||a;var c,d,e="dialog",f=a.document,g=f.documentElement,h=f.body,i=b(g),j=a.componentNamespace.Dialog=function(a){this.$el=b(a),this.$background=this.$el.is("[data-nobg]")?b([]):b(f.createElement("div")).addClass(c.bkgd).appendTo("body"),this.hash=this.$el.attr("id")+"-dialog",this.isOpen=!1,this.positionMedia=this.$el.attr("data-set-position-media"),this.isTransparentBackground=this.$el.is("[data-transbg]")};j.events=d={open:e+"-open",opened:e+"-opened",close:e+"-close",closed:e+"-closed"},j.classes=c={open:e+"-open",opened:e+"-opened",content:e+"-content",close:e+"-close",closed:e+"-closed",bkgd:e+"-background",bkgdOpen:e+"-background-open",bkgdTrans:e+"-background-trans"},j.prototype.isSetScrollPosition=function(){return!this.positionMedia||a.matchMedia&&a.matchMedia(this.positionMedia).matches},j.prototype.destroy=function(){this.$background.remove()},j.prototype.open=function(){this.$background.length&&(this.$background[0].style.height=Math.max(g.scrollHeight,g.clientHeight)+"px"),this.$el.addClass(c.open),this.$background.addClass(c.bkgdOpen),this._setBackgroundTransparency(),this.isSetScrollPosition()?(this.scroll="pageYOffset"in a?a.pageYOffset:g.scrollY||g.scrollTop||h&&h.scrollY||0,this.$el[0].style.top=this.scroll+"px"):this.$el[0].style.top="",i.addClass(c.open),this.isOpen=!0,location.hash=this.hash,f.activeElement&&(this.focused=f.activeElement),this.$el[0].focus(),this.$el.trigger(d.opened)},j.prototype._setBackgroundTransparency=function(){this.isTransparentBackground&&this.$background.addClass(c.bkgdTrans)},j.prototype.close=function(){this.isOpen&&(this.$el.removeClass(c.open),this.$background.removeClass(c.bkgdOpen),i.removeClass(c.open),this.focused&&this.focused.focus(),this.isSetScrollPosition()&&a.scrollTo(0,this.scroll),this.isOpen=!1,this.$el.trigger(d.closed))}}(this,jQuery),function(a,b){var c=a.componentNamespace.Dialog,d=document;b.fn.dialog=function(){return this.each(function(){var e=b(this),f=new c(this);e.data("instance",f),e.addClass(c.classes.content).attr("role","dialog").attr("tabindex",0).bind(c.events.open,function(){f.open()}).bind(c.events.close,function(){f.close()}).bind("click",function(d){b(d.target).is("."+c.classes.close)&&(a.history.back(),d.preventDefault())}),f.$background.bind("click",function(){a.history.back()}),b(a).bind("hashchange",function(){var b=a.location.hash.replace("#","");b!==f.hash&&f.close()}),b(d).bind("click",function(a){var d=b(a.target).closest("a");if(!f.isOpen&&d.length&&d.attr("href")){try{var g=b(d.attr("href"))}catch(h){return}g.length&&g.is(e)&&(g.trigger(c.events.open),a.preventDefault())}}),b(d).bind("keyup",function(a){27===a.which&&f.close()})})},b(function(){b(".dialog").dialog()})}(this,jQuery);